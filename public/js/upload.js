(()=>{document.getElementById("add-post-btn").addEventListener("click",(function(){return $("#addPostModal").modal("show")}));var e=document.getElementById("image"),t=document.getElementById("dropzone"),n=document.getElementById("image-preview"),d=document.getElementById("post-upload-loader"),s=document.getElementById("reset-btn"),a=document.getElementById("addPostForm"),i=document.getElementById("uploadBtn"),r=["image/png","image/jpeg"];function o(e){e.preventDefault(),e.stopPropagation()}function l(e){toastr.error(e,"Image Invalid!",{closeButton:!0,newestOnTop:!0,progressBar:!0,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"5000"})}function c(e){if(e)return r.includes(e.type)?!(e.size>=4e6)||(l("Maximum image size is ".concat(4," MB.")),!1):(l("Invalid file type."),!1)}function m(e){t.classList.add("dragover")}function u(e){t.classList.remove("dragover")}function v(){if(e.files&&e.files[0]){t.classList.remove("d-flex"),t.classList.add("d-none"),n.classList.add("d-none"),d.classList.remove("d-none");var s=new FileReader;s.addEventListener("load",(function(e){n.querySelector("img").src=e.target.result,t.classList.add("d-none"),n.classList.remove("d-none"),d.classList.add("d-none")})),s.readAsDataURL(e.files[0])}}function g(){t.classList.contains("d-flex")?(t.classList.remove("d-flex"),t.classList.add("d-none")):(t.classList.remove("d-none"),t.classList.add("d-flex")),n.classList.contains("d-none")?n.classList.remove("d-none"):n.classList.add("d-none")}e.accept=r.join(","),e.multiple=!1,t.addEventListener("drag",o),t.addEventListener("dragstart",o),t.addEventListener("dragend",o),t.addEventListener("dragover",o),t.addEventListener("dragenter",o),t.addEventListener("dragleave",o),t.addEventListener("drop",o),a.addEventListener("submit",o),s.addEventListener("click",(function(){n.classList.add("d-none"),t.classList.remove("d-none"),t.classList.add("d-flex"),n.querySelector("img").src="",e.value=""})),t.addEventListener("dragover",m),t.addEventListener("dragenter",m),t.addEventListener("dragleave",u),t.addEventListener("dragend",u),t.addEventListener("drop",u),e.addEventListener("change",(function(t){if(!c(e.files[0]))return;g(),v()})),t.addEventListener("drop",(function(t){var n=t.dataTransfer.files;if(n.length>=1){if(!c(n[0]))return;var d=new DataTransfer,s=n[0];d.items.add(s),e.files=d.files,g(),v()}})),a.addEventListener("submit",(function(){var t=!1,n=!1;1!==e.files.length?(document.getElementById("image-err").style.display="block",t=!0):(document.getElementById("image-err").style.display="none",t=!1);document.getElementById("caption").value.length>100?(document.getElementById("caption-err-max").style.display="block",n=!0):(document.getElementById("caption-err-max").style.display="none",n=!1);t||n||(i.disabled=!0,i.querySelector("div").classList.remove("d-none"),i.style.cursor="no-drop",a.submit())}))})();